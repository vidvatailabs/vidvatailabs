<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Logo Color Extractor</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 50px auto;
            padding: 20px;
            background: #1a1a1a;
            color: #fff;
        }
        .color-box {
            width: 100px;
            height: 100px;
            display: inline-block;
            margin: 10px;
            border: 2px solid #fff;
            border-radius: 8px;
        }
        .color-info {
            margin: 20px 0;
            padding: 15px;
            background: #2a2a2a;
            border-radius: 8px;
        }
        button {
            padding: 10px 20px;
            background: #38bdf8;
            color: #000;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 0;
        }
        button:hover {
            background: #0ea5e9;
        }
        pre {
            background: #000;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
        }
    </style>
</head>
<body>
    <h1>Logo Color Extractor</h1>
    <p>This will extract colors from your logo and generate CSS variables.</p>
    <button onclick="extractColors()">Extract Colors from Logo</button>
    
    <div id="results"></div>

    <script>
        async function extractColors() {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = '<p>Loading and analyzing logo...</p>';
            
            try {
                // Load the image
                const img = new Image();
                img.crossOrigin = 'anonymous';
                img.src = 'images/logo.webp';
                
                await new Promise((resolve, reject) => {
                    img.onload = resolve;
                    img.onerror = reject;
                });
                
                // Create canvas to read pixels
                const canvas = document.createElement('canvas');
                const ctx = canvas.getContext('2d');
                canvas.width = img.width;
                canvas.height = img.height;
                ctx.drawImage(img, 0, 0);
                
                // Get pixel data
                const imageData = ctx.getImageData(0, 0, canvas.width, canvas.height);
                const pixels = imageData.data;
                
                // Extract colors (skip every 10th pixel for performance)
                const colors = [];
                for (let i = 0; i < pixels.length; i += 40) { // RGBA, so every 10 pixels = 40 bytes
                    const r = pixels[i];
                    const g = pixels[i + 1];
                    const b = pixels[i + 2];
                    const brightness = (r + g + b) / 3;
                    
                    // Filter out very light/white and very dark/black
                    if (brightness > 30 && brightness < 240) {
                        colors.push({r, g, b, brightness});
                    }
                }
                
                // Count color frequencies (quantize to reduce similar colors)
                const colorMap = new Map();
                colors.forEach(color => {
                    // Quantize to reduce similar colors
                    const qr = Math.round(color.r / 10) * 10;
                    const qg = Math.round(color.g / 10) * 10;
                    const qb = Math.round(color.b / 10) * 10;
                    const key = `${qr},${qg},${qb}`;
                    
                    if (!colorMap.has(key)) {
                        colorMap.set(key, {r: qr, g: qg, b: qb, count: 0});
                    }
                    colorMap.get(key).count++;
                });
                
                // Sort by frequency
                const sortedColors = Array.from(colorMap.values())
                    .sort((a, b) => b.count - a.count)
                    .slice(0, 10);
                
                // Find most saturated color
                let mostSaturated = null;
                let maxSaturation = 0;
                
                colors.forEach(color => {
                    const r = color.r / 255;
                    const g = color.g / 255;
                    const b = color.b / 255;
                    const max = Math.max(r, g, b);
                    const min = Math.min(r, g, b);
                    const saturation = max === 0 ? 0 : (max - min) / max;
                    const brightness = (r + g + b) / 3;
                    
                    if (saturation > maxSaturation && brightness > 0.3 && brightness < 0.95) {
                        maxSaturation = saturation;
                        mostSaturated = color;
                    }
                });
                
                // Display results
                let html = '<div class="color-info"><h2>Top Colors Found:</h2>';
                
                sortedColors.forEach((color, index) => {
                    const hex = `#${color.r.toString(16).padStart(2, '0')}${color.g.toString(16).padStart(2, '0')}${color.b.toString(16).padStart(2, '0')}`.toUpperCase();
                    html += `
                        <div style="margin: 15px 0;">
                            <div class="color-box" style="background: ${hex};"></div>
                            <div style="display: inline-block; margin-left: 20px; vertical-align: top;">
                                <strong>Color ${index + 1}:</strong><br>
                                RGB(${color.r}, ${color.g}, ${color.b})<br>
                                ${hex}
                            </div>
                        </div>
                    `;
                });
                
                html += '</div>';
                
                // Generate CSS
                const primary = sortedColors[0];
                const primaryHex = `#${primary.r.toString(16).padStart(2, '0')}${primary.g.toString(16).padStart(2, '0')}${primary.b.toString(16).padStart(2, '0')}`.toUpperCase();
                
                const primaryDarkR = Math.max(0, primary.r - 30);
                const primaryDarkG = Math.max(0, primary.g - 30);
                const primaryDarkB = Math.max(0, primary.b - 30);
                const primaryDarkHex = `#${primaryDarkR.toString(16).padStart(2, '0')}${primaryDarkG.toString(16).padStart(2, '0')}${primaryDarkB.toString(16).padStart(2, '0')}`.toUpperCase();
                
                const secondary = sortedColors[1] || sortedColors[0];
                const secondaryHex = `#${secondary.r.toString(16).padStart(2, '0')}${secondary.g.toString(16).padStart(2, '0')}${secondary.b.toString(16).padStart(2, '0')}`.toUpperCase();
                
                html += `
                    <div class="color-info">
                        <h2>Suggested CSS Variables:</h2>
                        <pre>:root {
    --primary: ${primaryHex};
    --primary-dark: ${primaryDarkHex};
    --secondary: ${secondaryHex};
}</pre>
                        <button onclick="copyToClipboard()">Copy CSS to Clipboard</button>
                    </div>
                `;
                
                // Store for copying
                window.cssVars = `:root {
    --primary: ${primaryHex};
    --primary-dark: ${primaryDarkHex};
    --secondary: ${secondaryHex};
}`;
                
                resultsDiv.innerHTML = html;
                
            } catch (error) {
                resultsDiv.innerHTML = `<p style="color: red;">Error: ${error.message}</p>`;
            }
        }
        
        function copyToClipboard() {
            navigator.clipboard.writeText(window.cssVars).then(() => {
                alert('CSS variables copied to clipboard!');
            });
        }
    </script>
</body>
</html>
